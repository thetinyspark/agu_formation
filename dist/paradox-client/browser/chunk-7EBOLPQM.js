import{$ as V,A as f,B as S,C as w,D as g,E as x,G as E,H as N,I as T,K as B,X as O,a as _,ba as A,ca as D,ea as I,ga as R,ia as q,k as M,l as P,la as L,ma as $,n as m,na as j,o as F,p as b,pa as k,t as s,u as c,v as y,w as p,x as a,y as h,z as v}from"./chunk-FU7IP4T4.js";var z=(()=>{let e=class e{transform(i,t=""){return t==""?i:i.filter(n=>n.platform==t)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m({name:"platform",type:e,pure:!0,standalone:!0});let r=e;return r})();var G=(()=>{let e=class e{transform(i,t=0,n=100){return i.filter(o=>o.price>=t&&o.price<=n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m({name:"price",type:e,pure:!0,standalone:!0});let r=e;return r})();var H=(()=>{let e=class e{transform(i,t=""){return t==""?i:i.filter(n=>{let o=n.name.toLowerCase(),l=t.toLowerCase();return o.includes(l)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m({name:"name",type:e,pure:!0,standalone:!0});let r=e;return r})();var J=(()=>{let e=class e{transform(i,t){let n=new z,o=new G,l=new H,u=i;return u=n.transform(u,t.currentPlatform),u=o.transform(u,t.priceMin,t.priceMax),u=l.transform(u,t.nameFilter),u}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m({name:"catalog",type:e,pure:!0,standalone:!0});let r=e;return r})();function K(r,e){if(r&1&&(p(0,"option",6),g(1),a()),r&2){let d=e.$implicit;w("value",d),s(1),x(d)}}function Q(r,e){if(r&1){let d=v();p(0,"app-product",7),f("onBuy",function(t){F(d);let n=S();return b(n.onBuyProduct(t))}),a()}if(r&2){let d=e.$implicit;c("currentProduct",d)("detailed",!1)("buyable",!0)("redirectable",!0)}}var ce=(()=>{let e=class e{constructor(){this.products=[],this.currentPlatform="",this.priceMin=0,this.priceMax=100,this.nameFilter="",this._catalog=M(A),this._activatedRoute=M(O)}ngOnInit(){return _(this,null,function*(){let i=this._activatedRoute.snapshot.data;this.products=i.catalog||[]})}getFilters(){return{currentPlatform:this.currentPlatform,priceMin:this.priceMin,priceMax:this.priceMax,nameFilter:this.nameFilter}}getPlatforms(){let i=this.products.map(o=>o.platform),t=new Set(i),n=Array.from(t);return n.unshift(""),n}onBuyProduct(i){this._catalog.buy(i)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=P({type:e,selectors:[["app-catalog"]],standalone:!0,features:[E],decls:20,vars:9,consts:[[1,"catalog"],[1,"platforms",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number",3,"ngModel","ngModelChange"],["type","string",3,"ngModel","ngModelChange"],[3,"currentProduct","detailed","buyable","redirectable","onBuy",4,"ngFor","ngForOf"],[3,"value"],[3,"currentProduct","detailed","buyable","redirectable","onBuy"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"label"),g(2,"Platforme: "),a(),p(3,"select",1),f("ngModelChange",function(l){return n.currentPlatform=l}),y(4,K,2,2,"option",2),a(),h(5,"br"),p(6,"label"),g(7,"Prix min: "),a(),p(8,"input",3),f("ngModelChange",function(l){return n.priceMin=l}),a(),h(9,"br"),p(10,"label"),g(11,"Prix max: "),a(),p(12,"input",3),f("ngModelChange",function(l){return n.priceMax=l}),a(),h(13,"br"),p(14,"label"),g(15,"Nom: "),a(),p(16,"input",4),f("ngModelChange",function(l){return n.nameFilter=l}),a(),h(17,"br"),y(18,Q,1,4,"app-product",5),N(19,"catalog"),a()),t&2&&(s(3),c("ngModel",n.currentPlatform),s(1),c("ngForOf",n.getPlatforms()),s(4),c("ngModel",n.priceMin),s(4),c("ngModel",n.priceMax),s(4),c("ngModel",n.nameFilter),s(2),c("ngForOf",T(19,6,n.products,n.getFilters())))},dependencies:[B,k,$,j,D,q,L,I,R,J,V]});let r=e;return r})();export{ce as CatalogComponent};
