import{$ as D,E as R,F as $,H as c,I as k,J,K as d,N as X,O as Q,P as _,Q as j,R as W,S as Y,T as E,U as Z,V as q,W as tt,X as et,Y as ot,Z as rt,_ as it,a as f,aa as nt,b as L,ba as at,c as M,ca as st,d as A,da as T,e as B,ea as g,f as V,fa as P,g as U,ga as pt,h as F,ha as N,i as S,ia as ct,j as G,ja as mt,k as a,l,la as lt,m as z,na as dt,oa as ut,q as O,r as K,s as b,sa as ft,t as y,u,ua as gt,v as x,w as p,x as s,y as C}from"./chunk-NEEIR2P7.js";var ht=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-home"]],standalone:!0,features:[d],decls:2,vars:0,template:function(o,n){o&1&&(p(0,"p"),c(1,"home works!"),s())}});let e=t;return e})();function Dt(e,t){if(e&1&&C(0,"app-product",1),e&2){let i=t.$implicit;u("currentProduct",i)("detailed",!1)}}var vt=(()=>{let t=class t{constructor(){this.products=[],this._route=a(D)}ngOnInit(){return f(this,null,function*(){let r=this._route.snapshot.data;this.products=r.cart})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-cart"]],standalone:!0,features:[d],decls:1,vars:1,consts:[[3,"currentProduct","detailed",4,"ngFor","ngForOf"],[3,"currentProduct","detailed"]],template:function(o,n){o&1&&x(0,Dt,1,2,"app-product",0),o&2&&u("ngForOf",n.products)},dependencies:[T,Q]});let e=t;return e})();var yt=(()=>{let t=class t{constructor(){this._activatedRoute=a(D),this._catalog=a(P),this.product=null}ngOnInit(){return f(this,null,function*(){let r=yield A(this._activatedRoute.paramMap),o=parseInt(r.get("id")||"-1");this.product=yield this._catalog.getProductById(o)})}onBuyProduct(r){this._catalog.buy(r)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-product-detail"]],standalone:!0,features:[d],decls:1,vars:3,consts:[[3,"currentProduct","detailed","buyable","onBuy"]],template:function(o,n){o&1&&(p(0,"app-product",0),R("onBuy",function(H){return n.onBuyProduct(H)}),s()),o&2&&u("currentProduct",n.product)("detailed",!0)("buyable",!0)},dependencies:[T]});let e=t;return e})();var Ct=(e,t)=>f(void 0,null,function*(){return(yield a(P).getCart()).length>0});var w=(()=>{let t=class t{startLoading(){this.percentage.set(0),this.isLoading.set(!0)}setProgress(r){let o=r,n=this.percentage(),m=o-n;V(5).pipe(U(m)).pipe(B(H=>{this.percentage.set(this.percentage()+1),this.percentage()>=100&&this.isLoading.set(!1)})).subscribe(()=>{})}constructor(){this.isLoading=b(!1),this.percentage=b(0)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Pt=(e,t)=>f(void 0,null,function*(){let i=a(P),r=a(w);r.startLoading(),r.setProgress(25);let o=i.allProducts();return r.setProgress(100),o});var St=(e,t)=>f(void 0,null,function*(){let i=a(P),r=a(w);r.startLoading(),r.setProgress(25);let o=yield i.getCart();return r.setProgress(100),o});function Ot(e,t){e&1&&(p(0,"p"),c(1," L'email est invalide "),s())}var bt=(()=>{let t=class t{constructor(){this._builder=a(ft),this.form=this._builder.group({email:["",[N.required,this.validateEmail]],password:["",[N.required,this.validatePassword]]})}validateEmail(r){let o=r.value;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?null:{invalidEmail:!0}}validatePassword(r){return r.value.length>=8?null:{tooShortPassword:!0}}onSubmit(){this.form.valid}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-login"]],standalone:!0,features:[d],decls:12,vars:3,consts:[[3,"formGroup","ngSubmit"],["type","email","formControlName","email"],[4,"ngIf"],["type","password","formControlName","password"],["type","submit",3,"disabled"]],template:function(o,n){if(o&1&&(p(0,"form",0),R("ngSubmit",function(){return n.onSubmit()}),p(1,"div")(2,"label"),c(3,"Email: "),s(),C(4,"input",1),x(5,Ot,2,0,"p",2),s(),p(6,"div")(7,"label"),c(8,"Password: "),s(),C(9,"input",3),s(),p(10,"button",4),c(11,"Connexion"),s()()),o&2){let m;u("formGroup",n.form),y(5),u("ngIf",((m=n.form.get("email"))==null?null:m.dirty)&&((m=n.form.get("email"))==null?null:m.touched)&&((m=n.form.get("email"))==null||m.errors==null?null:m.errors.invalidEmail)),y(5),u("disabled",n.form.invalid)}},dependencies:[j,_,gt,lt,pt,ct,mt,dt,ut],styles:["input.ng-untouched[_ngcontent-%COMP%]{border:1px solid gray}input.ng-touched.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid red;background-color:red}input.ng-touched.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid green;background-color:green}"]});let e=t;return e})();var kt=[{path:"",component:ht,title:"Home page"},{path:"cart",component:vt,title:"My Cart",canActivate:[Ct],resolve:{cart:St}},{path:"catalog",loadComponent:()=>import("./chunk-CMSDKPPX.js").then(e=>e.CatalogComponent),title:"My Catalog",resolve:{catalog:Pt}},{path:"product/:id",component:yt,title:"My Product"},{path:"login",component:bt,title:"Me"}],xt=kt;var wt=[{id:1,name:"Call Of Duty",img:"./assets/img/cod.jpg",price:79.99,desc:"Un FPS dans l'univers guerre moderne",platform:"PS5"},{id:2,name:"Tetris",img:"./assets/img/tetris.jpg",desc:"Le plus vieux jeu du monde, et en plus, il est russe.",price:24.99,platform:"Steam"},{id:3,name:"Halo",img:"./assets/img/halo.jpg",desc:"Un FPS dans l'univers guerre futuriste",price:59.99,platform:"XBOX"},{id:4,name:"Pacman",img:"./assets/img/pacman.webp",desc:"Jeu d'arcade ancien",price:14.99,platform:"PC"},{id:5,name:"Super Pacman PS5",img:"./assets/img/pacman.webp",desc:"Jeu d'arcade ancien o\xF9 vous incarnez un petit glouton jaune cours\xE9 par des fant\xF4mes",price:17.99,platform:"PS5"}];var It=(()=>{let t=class t{constructor(){this._cart=[]}addToCart(r){this._cart.push(r)}getProductById(r){return this.getProducts().find(o=>o.id==r)||null}getCart(){return this._cart}getProducts(){return wt}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Mt=(e,t)=>{let i=a(It),r=Math.round(Math.random()*1e3)+1e3;if(e.method=="GET"){if(e.url==g.productsURI){let o=i.getProducts();return M(new E({status:200,body:o})).pipe(F(r))}if(e.url.includes(g.productURI.replace(":id",""))){let o=g.productURI.replace(":id",""),n=parseInt(e.url.replace(o,"")),m=i.getProductById(n);return M(new E({status:200,body:m})).pipe(F(r))}if(e.url==g.cartURI){let o=i.getCart();return M(new E({status:200,body:o})).pipe(F(r))}}if(e.method=="POST"&&e.url==g.buyURI){let n=e.body.product;return i.addToCart(n),M(new E({status:200,body:""})).pipe(F(r))}return t(e)};var Nt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=z({type:t}),t.\u0275inj=G({providers:[{provide:X,useValue:g.baseHref}]});let e=t;return e})(),Ft={providers:[rt(),st(xt),it(),q(tt([Mt])),O(et),O(Nt)]};var Et=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-nav-bar"]],standalone:!0,features:[d],decls:14,vars:0,consts:[["routerLink","/"],["routerLink","/catalog"],["routerLink","/cart"],["routerLink","/login"]],template:function(o,n){o&1&&(p(0,"nav")(1,"ul")(2,"li")(3,"a",0),c(4,"Home"),s()(),p(5,"li")(6,"a",1),c(7,"Catalog"),s()(),p(8,"li")(9,"a",2),c(10,"Cart"),s()(),p(11,"li")(12,"a",3),c(13,"Login"),s()()()())},dependencies:[at]});let e=t;return e})();var Ht=[],At=[];function Lt(e){return function(t){Ht.push({target:t,data:e})}}function Rt(e,t,i){let r=i.value;i.value=function(...o){return console.log(`Appel de ${t} avec`,o),r.apply(this,o)}}function _t(e,t,i){let r=i.value;At.push(r.bind(e))}var v,I=(v=class{constructor(){this.client=a(Z)}show(){let t=new W({Authorization:""}),i=new Y;i.set("userId",10),i.set("pageNum",2),this.client.get(g.productsURI,{headers:t,params:i})}addition(t,i){return t+i}testAddition(){return this.addition(10,5)==15}},v.\u0275fac=function(i){return new(i||v)},v.\u0275prov=S({token:v,factory:v.\u0275fac,providedIn:"root"}),v);L([Rt],I.prototype,"show",null);L([_t],I.prototype,"testAddition",null);I=L([Lt({name:"DummyService",desc:"C'est un service inutile"})],I);function Bt(e,t){if(e&1&&(p(0,"div",2)(1,"p"),c(2),s(),C(3,"img",3),s()),e&2){let i=$();y(2),J("",i.percentage(),"%")}}var jt=(()=>{let t=class t{constructor(){this.title="My Game Video Store",this.price=b(100),this.vat=b(20),this.loadingService=a(w),this.isLoading=this.loadingService.isLoading,this.percentage=this.loadingService.percentage,this.dummy=a(I),this.total=K(()=>this.price()*(1+this.vat()/100))}ngOnInit(){}upVAT(){this.vat.set(this.vat()+1)}upPrice(){this.price.set(this.price()+10)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=l({type:t,selectors:[["app-root"]],standalone:!0,features:[d],decls:8,vars:3,consts:[["id","mainContent"],["class","loader",4,"ngIf"],[1,"loader"],["src","./assets/img/spinner.gif"]],template:function(o,n){o&1&&(p(0,"main",0)(1,"h1"),c(2),s(),p(3,"p"),c(4),s(),C(5,"app-nav-bar")(6,"router-outlet"),x(7,Bt,4,1,"div",1),s()),o&2&&(y(2),k(n.title),y(2),k(n.isLoading()),y(3),u("ngIf",n.isLoading()==!0))},dependencies:[j,_,nt,Et],styles:["#mainContent[_ngcontent-%COMP%]{width:80%;height:100%;margin:auto;padding:0 15px;background-color:#fafafa;background-color:#eaeaea}h1[_ngcontent-%COMP%]{font-size:3rem;font-family:Arial,Helvetica,sans-serif;font-weight:700;text-align:center;padding:0;margin:0}.loader[_ngcontent-%COMP%]{width:80%;height:80%;margin:auto;background:white;position:absolute;top:10%;left:10%}.loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:20% auto auto}"]});let e=t;return e})();ot(jt,Ft).catch(e=>console.error(e));
/**i18n:b7b9e70e957b5630a2fe363431235bf94ddd2c557bc566e782ca9bfb7b64fb9a*/
